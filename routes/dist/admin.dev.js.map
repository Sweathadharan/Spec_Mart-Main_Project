{"version":3,"sources":["admin.js"],"names":["express","require","router","Router","slug","database","RunQuery","isAdmin","req","res","next","isAuthenticated","user","Admin","redirect","Username","route","get","sqlStr","categories","contextDict","title","customer","render","params","id","category","post","body","name","description","result","products","product","price","unit","year","feature","selectQuery","orders","order","UserID","orderCustomer","AddressID","address","OrderID","status","customers","updateQuery","deleteQuery","module","exports"],"mappings":"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","sourcesContent":["var express = require('express');\nvar router = express.Router();\n\nvar slug = require('slug');\n\n// database module\nvar database = require('../config/database');\nvar RunQuery = database.RunQuery;\n\nfunction isAdmin(req, res, next) {\n  if (req.isAuthenticated()) {\n    if (req.user.Admin == 1) {\n      return next();\n    } else {\n      res.redirect('/usr/' + req.user.Username);\n    }\n  }\n\n  res.redirect('/');\n}\n\nrouter.route('/').get(isAdmin, function (req, res, next) {\n  res.redirect('/admin/cat');\n  /*var contextDict = {\n         title: 'Admin',\n         customer: req.user\n         };\n         res.render('admin/admin', contextDict);*/\n});\n\nrouter.route('/cat').get(isAdmin, function (req, res, next) {\n  var sqlStr = '\\\n        SELECT *\\\n        FROM Categories';\n\n  RunQuery(sqlStr, function (categories) {\n    var contextDict = {\n      title: 'Admin - Categories',\n      categories: categories,\n      customer: req.user,\n    };\n\n    res.render('admin/categories', contextDict);\n  });\n});\n\nrouter\n  .route('/cat/:id/edit')\n  .get(isAdmin, function (req, res, next) {\n    var sqlStr =\n      '\\\n        SELECT *\\\n        FROM Categories\\\n        WHERE CategoryID = ' +\n      req.params.id;\n\n    RunQuery(sqlStr, function (category) {\n      var contextDict = {\n        title: 'Admin - Edit Category',\n        category: category[0],\n        customer: req.user,\n      };\n\n      res.render('admin/editCat', contextDict);\n    });\n  })\n\n  .post(isAdmin, function (req, res, next) {\n    var sqlStr =\n      \"\\\n        UPDATE Categories\\\n        SET CategoryName = '\" +\n      req.body.name +\n      \"', \\\n            Description = '\" +\n      req.body.description +\n      \"', \\\n            CategorySlug = '\" +\n      slug(req.body.name) +\n      \"' \" +\n      /*Image = name.png\\*/\n      'WHERE CategoryID = ' +\n      req.params.id;\n\n    RunQuery(sqlStr, function (category) {\n      res.redirect('/admin/cat');\n    });\n  });\n\nrouter.route('/cat/:id/delete').post(isAdmin, function (req, res, next) {\n  sqlStr =\n    '\\\n            DELETE FROM Categories\\\n            WHERE CategoryID = ' +\n    req.params.id;\n\n  RunQuery(sqlStr, function (result) {\n    res.redirect('/admin/cat');\n  });\n});\n\nrouter\n  .route('/cat/add')\n  .get(isAdmin, function (req, res, next) {\n    var contextDict = {\n      title: 'Admin - Add Category',\n      customer: req.user,\n    };\n\n    res.render('admin/addCat', contextDict);\n  })\n\n  .post(isAdmin, function (req, res, next) {\n    var sqlStr =\n      \"\\\n        INSERT INTO Categories\\\n        VALUES (null, '\" +\n      req.body.name +\n      \"', \\\n            '\" +\n      req.body.description +\n      \"', \\\n            '\" +\n      slug(req.body.name) +\n      \"', \\\n            '\" +\n      slug(req.body.name) +\n      \".png')\";\n    /*Image = name.png\\*/\n    RunQuery(sqlStr, function (category) {\n      res.redirect('/admin/cat');\n    });\n  });\n\nrouter.route('/products').get(isAdmin, function (req, res, next) {\n  var sqlStr =\n    '\\\n                    SELECT Products.*, Categories.CategoryName\\\n                    FROM Products\\\n                    INNER JOIN Categories\\\n                    ON Products.CategoryID = Categories.CategoryID';\n\n  RunQuery(sqlStr, function (products) {\n    var contextDict = {\n      title: 'Admin - Products',\n      products: products,\n      customer: req.user,\n    };\n\n    res.render('admin/products', contextDict);\n  });\n});\n\nrouter\n  .route('/products/:id/edit')\n  .get(isAdmin, function (req, res, next) {\n    var sqlStr =\n      '\\\n                    SELECT Products.*, Categories.CategoryName\\\n                    FROM Products\\\n                    INNER JOIN Categories\\\n                    ON Products.CategoryID = Categories.CategoryID\\\n                    WHERE ProductID = ' +\n      req.params.id;\n\n    RunQuery(sqlStr, function (product) {\n      sqlStr = '\\\n                SELECT *\\\n                FROM Categories';\n\n      RunQuery(sqlStr, function (categories) {\n        var contextDict = {\n          title: 'Admin - Edit Product',\n          product: product[0],\n          categories: categories,\n          customer: req.user,\n        };\n\n        res.render('admin/editProduct', contextDict);\n      });\n    });\n  })\n\n  .post(isAdmin, function (req, res, next) {\n    var sqlStr =\n      \"\\\n        UPDATE Products\\\n        SET ProductName = '\" +\n      req.body.name +\n      \"', \\\n            CategoryID = \" +\n      req.body.category +\n      ', \\\n            ProductPrice = ' +\n      req.body.price +\n      ', \\\n            UnitsInStock = ' +\n      req.body.unit +\n      \", \\\n            Description = '\" +\n      req.body.description +\n      \"', \\\n            ManufactureYear = \" +\n      req.body.year +\n      \", \\\n            ProductSlug = '\" +\n      slug(req.body.name) +\n      \"', \" +\n      /*Image = name.png\\*/\n      'Feature = ' +\n      req.body.feature +\n      ' \\\n        WHERE ProductID = ' +\n      req.params.id;\n\n    RunQuery(sqlStr, function (category) {\n      res.redirect('/admin/products');\n    });\n  });\n\nrouter.route('/products/:id/delete').post(isAdmin, function (req, res, next) {\n  var sqlStr =\n    '\\\n            DELETE FROM Products\\\n            WHERE ProductID = ' +\n    req.params.id;\n\n  RunQuery(sqlStr, function (result) {\n    res.redirect('/admin/products');\n  });\n});\n\nrouter\n  .route('/products/add')\n  .get(isAdmin, function (req, res, next) {\n    var sqlStr = '\\\n            SELECT *\\\n            FROM Categories';\n\n    RunQuery(sqlStr, function (categories) {\n      var contextDict = {\n        title: 'Admin - Add Product',\n        categories: categories,\n        customer: req.user,\n      };\n\n      res.render('admin/addProduct', contextDict);\n    });\n  })\n\n  .post(isAdmin, function (req, res, next) {\n    var sqlStr =\n      \"\\\n            INSERT INTO Products\\\n            VALUES (null, '\" +\n      req.body.name +\n      \"', \" +\n      req.body.category +\n      ', ' +\n      req.body.price +\n      ', ' +\n      req.body.unit +\n      \", \\\n            '\" +\n      req.body.description +\n      \"', \" +\n      req.body.year +\n      \", \\\n            '\" +\n      slug(req.body.name) +\n      \".png', \\\n            '\" +\n      slug(req.body.name) +\n      \"', \" +\n      req.body.feature +\n      ')';\n    /*Image = name.png\\*/\n    RunQuery(sqlStr, function (category) {\n      res.redirect('/admin/products');\n    });\n  });\n\nrouter.route('/orders').get(isAdmin, function (req, res) {\n  var selectQuery = '\\\n            SELECT *\\\n            FROM Orders';\n\n  RunQuery(selectQuery, function (orders) {\n    var contextDict = {\n      title: 'Admin - Orders',\n      customer: req.user,\n      orders: orders,\n    };\n\n    res.render('admin/orders', contextDict);\n  });\n});\n\nrouter.route('/orders/:id').get(isAdmin, function (req, res) {\n  //get order info\n  var selectQuery =\n    '\\\n            SELECT *\\\n            FROM Orders\\\n            WHERE OrderID = ' +\n    req.params.id;\n\n  RunQuery(selectQuery, function (order) {\n    //get user info\n    selectQuery =\n      '\\\n            SELECT *\\\n            FROM Users\\\n            WHERE UserID = ' +\n      order[0].UserID;\n\n    RunQuery(selectQuery, function (orderCustomer) {\n      //get delivery info\n      selectQuery =\n        '\\\n                SELECT *\\\n                FROM Addresses\\\n                WHERE AddressID = ' +\n        order[0].AddressID;\n\n      RunQuery(selectQuery, function (address) {\n        //get order info\n        selectQuery =\n          '\\\n                    SELECT *\\\n                    FROM `Order Details`\\\n                    INNER JOIN (\\\n                        SELECT Products.*, Categories.CategorySlug\\\n                        FROM Products\\\n                        INNER JOIN Categories\\\n                        ON Products.CategoryID = Categories.CategoryID\\\n                    ) `Table`\\\n                    ON `Order Details`.ProductID = `Table`.ProductID\\\n                    WHERE OrderID = ' +\n          order[0].OrderID;\n\n        RunQuery(selectQuery, function (products) {\n          //get order info\n\n          var contextDict = {\n            title: 'Admin - Orders',\n            customer: req.user,\n            order: order[0],\n            orderCustomer: orderCustomer[0],\n            address: address[0],\n            products: products,\n          };\n\n          res.render('admin/viewOrder', contextDict);\n        });\n      });\n    });\n  });\n});\n\n// SELECT *\\\n//             FROM orders WHERE  = \"2022-04-06 16:51:10\"\n// NEW ONE\n// router.get('orders/pp').get(isAdmin, function (req, res) {\n\n//   // var selectQuery = '\\\n//   //           SELECT *\\\n//   //           FROM orders WHERE OrderDate = \"2022-04-06 16:51:10\" ';\n\n//   // RunQuery(selectQuery, function (customers) {\n//   //   var contextDict = {\n//   //     title: 'Admin - Customers',\n//   //     customer: req.Status,\n//   //     customers: customers,\n//   //   };\n//   //   // res.render('/admin/result', contextDict);\n//     console.log(\"customers-------------------------\")\n//   });\n// });\n\n\n\n\nrouter\n  .route('/orders/:id/update')\n  .get(isAdmin, function (req, res, next) {\n    var selectQuery =\n      '\\\n            SELECT *\\\n            FROM Orders\\\n            WHERE OrderID = ' +\n      req.params.id;\n\n    RunQuery(selectQuery, function (order) {\n      selectQuery =\n        '\\\n                SELECT *\\\n                FROM Addresses\\\n                WHERE AddressID = ' +\n        order[0].AddressID;\n\n      RunQuery(selectQuery, function (address) {\n        selectQuery =\n          '\\\n                    SELECT *\\\n                    FROM `Order Details`\\\n                    INNER JOIN (\\\n                        SELECT Products.*, Categories.CategorySlug\\\n                        FROM Products\\\n                        INNER JOIN Categories\\\n                        ON Products.CategoryID = Categories.CategoryID\\\n                    ) `Table`\\\n                    ON `Order Details`.ProductID = `Table`.ProductID\\\n                    WHERE OrderID = ' +\n          order[0].OrderID;\n\n        RunQuery(selectQuery, function (products) {\n          var contextDict = {\n            title: 'Admin - Update Status Order ' + req.params.id,\n            customer: req.user,\n            order: order[0],\n            address: address[0],\n            products: products,\n          };\n\n          res.render('admin/updateOrder', contextDict);\n        });\n      });\n    });\n  })\n\n  .post(isAdmin, function (req, res, next) {\n    var sqlStr =\n      \"\\\n        UPDATE Orders\\\n        SET Status = '\" +\n      req.body.status +\n      \"' \\\n        WHERE OrderID = \" +\n      req.params.id;\n\n    RunQuery(sqlStr, function (result) {\n      res.redirect('/admin/orders');\n    });\n  });\n\nrouter.route('/customers').get(isAdmin, function (req, res) {\n  var selectQuery = '\\\n            SELECT *\\\n            FROM Users';\n\n  RunQuery(selectQuery, function (customers) {\n    var contextDict = {\n      title: 'Admin - Customers',\n      customer: req.user,\n      customers: customers,\n    };\n\n    res.render('admin/customers', contextDict);\n  });\n});\n//SHK\n// router.route('/admin/orders').get(isAdmin, function (req, res) {\n//   var selectQuery = '\\\n//             SELECT *\\\n//             FROM orders WHERE OrderDate = \"2022-04-06 16:51:10\" ';\n\n//   RunQuery(selectQuery, function (customers) {\n//     var contextDict = {\n//       title: 'Admin - Customers',\n//       customer: req.user,\n//       customers: customers,\n//     };\n\n//     res.render('admin/customers', contextDict);\n//   });\n// });\n\n\nrouter.route('/customers/:id/makeAdmin').post(isAdmin, function (req, res) {\n  var updateQuery =\n    '\\\n            UPDATE Users\\\n            SET Admin = 1\\\n            WHERE UserID = ' +\n    req.params.id;\n\n  RunQuery(updateQuery, function (result) {\n    res.redirect('/admin/customers/');\n  });\n});\n\nrouter.route('/customers/:id/removeAdmin').post(isAdmin, function (req, res) {\n  var updateQuery =\n    '\\\n            UPDATE Users\\\n            SET Admin = 0\\\n            WHERE UserID = ' +\n    req.params.id;\n\n  RunQuery(updateQuery, function (result) {\n    res.redirect('/admin/customers/');\n  });\n});\n\nrouter.route('/customers/:id/delete').post(isAdmin, function (req, res) {\n  var deleteQuery =\n    '\\\n            DELETE FROM Users\\\n            WHERE UserID = ' +\n    req.params.id;\n\n  RunQuery(deleteQuery, function (result) {\n    res.redirect('/admin/customers/');\n  });\n});\n\n//eyepower\n//router.route('/admin/eyepower').get(isAdmin, function (req, res) {\n//    var insertQuery = '\\\n//       INSERT INTO eye_power \n// });\n\nmodule.exports = router;\n"],"file":"admin.dev.js"}