"use strict";var express=require("express"),router=express.Router(),database=require("../config/database"),RunQuery=database.RunQuery;router.all("/",function(o,u,e){var r="        SELECT *        FROM Categories";RunQuery(r,function(t){RunQuery(r="            SELECT Products.*, Categories.CategoryName, Categories.CategorySlug            FROM Products            INNER JOIN Categories            ON Products.CategoryID = Categories.CategoryID            WHERE Feature = 1",function(e){var r={currentUrl:"/",title:"Home",categories:t,featProducts:e,customer:o.user};u.render("index",r)})})}),router.route("/cat/").all(function(t,o,e){RunQuery("        SELECT *        FROM Categories",function(e){var r={currentUrl:"/cat",title:"Categories",categories:e,customer:t.user};o.render("categories",r)})}),router.route("/orders/res/").all(function(e,r,t){r.render("admin/base")}),router.post("/orders/res/kl",function(t,o){console.log(t.body.dataone);var e=t.body.dataone,r="    SELECT *    FROM orders WHERE OrderDate ="+"'".concat(e,"'");console.log(r),RunQuery(r,function(e){var r={currentUrl:"/res/kl",title:"Search",emb:e,customer:t.Status};console.log("CUSTOMER-----------------------------"),console.log(r.emb),o.render("admin/result",r)})}),router.route("/orders/mm/").all(function(t,o,e){RunQuery('              SELECT *              FROM orders WHERE OrderDate = "2022-11-09" ',function(e){var r={currentUrl:"/mm",title:"Search",emb:e,customer:t.Status};console.log("CUSTOMER-----------------------------"),console.log(r.emb),o.render("admin/result",r)})}),router.route("/cat/:catSlug").all(function(o,u,e){if("all"==o.params.catSlug){var r="                SELECT Products.*, Categories.CategoryName, Categories.CategorySlug                FROM Products                INNER JOIN Categories                ON Products.CategoryID = Categories.CategoryID";RunQuery(r,function(t){RunQuery(r="                SELECT *                FROM Categories",function(e){var r={title:"All products",products:t,categories:e,customer:o.user};u.render("categoryProducts",r)})})}else{var a="                SELECT Products.*, Categories.CategoryName, Categories.CategorySlug                FROM Products                INNER JOIN Categories                ON Products.CategoryID = Categories.CategoryID                WHERE Categories.CategorySlug = '"+o.params.catSlug+"'";RunQuery(a,function(t){RunQuery(a="                SELECT *                FROM Categories",function(e){var r={title:t[0].CategoryName,products:t,categories:e,customer:o.user};u.render("categoryProducts",r)})})}}),router.route("/cat/:catSlug/:prodSlug").all(function(t,o,e){var r="        SELECT *        FROM Products        WHERE ProductSlug = '"+t.params.prodSlug+"'";RunQuery(r,function(e){var r={title:e[0].ProductName,product:e[0],customer:t.user};o.render("productDetail",r)})}),router.route("/subscribe").post(function(e,r,t){var o="        INSERT INTO Subscribers        VALUES ('"+e.body.email+"')";RunQuery(o,function(e){r.redirect("/")})}),router.route("/eye").get(function(e,r){r.render("eye")}),module.exports=router;
//# sourceMappingURL=routes.min.js.map
