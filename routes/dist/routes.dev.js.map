{"version":3,"sources":["routes.js"],"names":["express","require","router","Router","database","RunQuery","all","req","res","next","sqlStr","categories","products","contextDict","currentUrl","title","featProducts","customer","user","render","route","post","console","log","body","dataone","klp","lop","emb","Status","params","catSlug","selectQuery","CategoryName","prodSlug","product","ProductName","email","result","redirect","get","module","exports"],"mappings":"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","sourcesContent":["var express = require('express');\nvar router = express.Router();\n\n// database module\nvar database = require('../config/database');\nvar RunQuery = database.RunQuery;\n\n/* Route Home page. */\nrouter.all('/', function (req, res, next) {\n    var sqlStr = '\\\n        SELECT *\\\n        FROM Categories';\n\n    RunQuery(sqlStr, function (categories) {\n        sqlStr = '\\\n            SELECT Products.*, Categories.CategoryName, Categories.CategorySlug\\\n            FROM Products\\\n            INNER JOIN Categories\\\n            ON Products.CategoryID = Categories.CategoryID\\\n            WHERE Feature = 1';\n\n        RunQuery(sqlStr, function (products) {\n            var contextDict = {\n                currentUrl: '/',\n                title: 'Home',\n                categories: categories,\n                featProducts: products,\n                customer: req.user\n            };\n\n            //isLoggedIn(req, contextDict);\n            res.render('index', contextDict);\n        });\n    });\n});\n\n/* Route Category page. */\nrouter.route('/cat/')\n    .all(function (req, res, next) {\n        var sqlStr = '\\\n        SELECT *\\\n        FROM Categories';\n\n        RunQuery(sqlStr, function (categories) {\n            var contextDict = {\n                currentUrl: '/cat',\n                title: 'Categories',\n                categories: categories,\n                customer: req.user\n            };\n\n            res.render('categories', contextDict);\n        });\n    });\n\n    \nrouter.route('/orders/res/')\n.all(function (req, res, next) {\n\n        res.render('admin/base');\n});\n\n// router.get('/orders/res/kl',function(req,res){\n//         var datval = req.params.kl\n//         console.log(datval)\n//         // res.render('admin/base');\n\n// })\n\nrouter.post('/orders/res/kl', function(req,res){\n    console.log(req.body.dataone);\n    var klp = req.body.dataone\n    var lop = `'${klp}'`\n    var sqlStr = '\\\n    SELECT *\\\n    FROM orders WHERE OrderDate ='+lop ;\n    console.log(sqlStr)\n    RunQuery(sqlStr, function (emb) {\n    var contextDict = {\n        currentUrl: '/res/kl',\n        title: 'Search',\n        emb: emb,\n        customer: req.Status\n    };\n    console.log(\"CUSTOMER-----------------------------\")\n    console.log(contextDict.emb)\n    res.render('admin/result', contextDict);\n    });    \n    // res.render('admin/base');\n  });\n\n\n\n\n\n// .all(function (req, res) {\n//         var datval = req.params\n//         console.log(datval)\n//         res.render('admin/base');\n// });\n\n\n\nrouter.route('/orders/mm/')\n    .all(function (req, res, next) {\n        // var datval = req.params.datevalue\n        // console.log(datval)\n        var sqlStr = '\\\n              SELECT *\\\n              FROM orders WHERE OrderDate = \"2022-11-09\" ';\n\n        RunQuery(sqlStr, function (emb) {\n            var contextDict = {\n                currentUrl: '/mm',\n                title: 'Search',\n                emb: emb,\n                customer: req.Status\n            };\n            console.log(\"CUSTOMER-----------------------------\")\n            console.log(contextDict.emb)\n            res.render('admin/result', contextDict);\n        });\n    });\n\n\n// router.get('/orders/pp',function (req, res) {\n\n//     var selectQuery = '\\\n//               SELECT *\\\n//               FROM orders WHERE OrderDate = \"2022-04-06 16:51:10\" ';\n    \n//     RunQuery(selectQuery, function (customers) {\n//       var contextDict = {\n//         title: 'Admin - Customers',\n//         customer: req.Status,\n//         customers: customers,\n//       };\n      \n//         console.log(\"customers-------------------------\")\n//         res.render('admin/result');\n//     });\n\n\n\n\n\n/* Route Category Products page. */\nrouter.route('/cat/:catSlug')\n    .all(function (req, res, next) {\n        if (req.params.catSlug == \"all\") {\n            var selectQuery = '\\\n                SELECT Products.*, Categories.CategoryName, Categories.CategorySlug\\\n                FROM Products\\\n                INNER JOIN Categories\\\n                ON Products.CategoryID = Categories.CategoryID';\n\n            RunQuery(selectQuery, function (products) {\n\n                selectQuery = '\\\n                SELECT *\\\n                FROM Categories';\n\n                RunQuery(selectQuery, function (categories) {\n\n                    var contextDict = {\n                        title: 'All products',\n                        products: products,\n                        categories: categories,\n                        customer: req.user\n                    };\n\n                    res.render('categoryProducts', contextDict);\n                });\n            });\n        }\n        else {\n            var sqlStr = '\\\n                SELECT Products.*, Categories.CategoryName, Categories.CategorySlug\\\n                FROM Products\\\n                INNER JOIN Categories\\\n                ON Products.CategoryID = Categories.CategoryID\\\n                WHERE Categories.CategorySlug = \\'' + req.params.catSlug + '\\'';\n\n            RunQuery(sqlStr, function (products) {\n\n                sqlStr = '\\\n                SELECT *\\\n                FROM Categories';\n\n                RunQuery(sqlStr, function (categories) {\n\n                    var contextDict = {\n                        title: products[0].CategoryName,\n                        products: products,\n                        categories: categories,\n                        customer: req.user\n                    };\n\n                    res.render('categoryProducts', contextDict);\n                });\n            });\n        }\n    });\n\n/* Route Product page. */\nrouter.route('/cat/:catSlug/:prodSlug')\n    .all(function (req, res, next) {\n        var sqlStr = '\\\n        SELECT *\\\n        FROM Products\\\n        WHERE ProductSlug = \\'' + req.params.prodSlug + '\\'';\n\n        RunQuery(sqlStr, function (product) {\n\n            var contextDict = {\n                title: product[0].ProductName,\n                product: product[0],\n                customer: req.user\n            };\n\n            res.render('productDetail', contextDict);\n        });\n    });\n\nrouter.route('/subscribe')\n    .post(function (req, res, next) {\n        var sqlStr = '\\\n        INSERT INTO Subscribers\\\n        VALUES (\\'' + req.body.email + '\\')';\n\n        RunQuery(sqlStr, function (result) {\n            res.redirect('/');\n        });\n    });\n\n\nrouter.route('/eye')\n.get(function (req, res) {\n\n    res.render('eye');\n});\n\n\n\n// router.route('/eye-test')\n// .get(function (req, res) {\n//     res.render('eye');\n// });\n\n\n/* Route Login page.\n router.route('/login/')\n .get (function (req, res, next) {\n var contextDict = {\n title: 'Login'\n };\n res.render('login', contextDict);\n });\n\n .post(function (req, res, next) {\n //read inputs\n //validate inputs\n //redirect to account info page\n var contextDict = {\n title: '',\n signInError: req.flash('loginError')\n };\n res.render('template', contextDict);\n });\n */\n\nmodule.exports = router;\n"],"file":"routes.dev.js"}