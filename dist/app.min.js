"use strict";var express=require("express"),path=require("path"),favicon=require("serve-favicon"),morgan=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),csrf=require("csrf"),session=require("express-session"),passport=require("passport"),flash=require("connect-flash"),app=express();app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.locals.pretty=!0,app.use(favicon(path.join(__dirname,"public","/img/ico/favicon.ico"))),app.use(morgan("dev"));var csrfProtection=csrf({cookie:!0});app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express.static(path.join(__dirname,"public"))),app.use(session({secret:"anhpham1509",saveUninitialized:!0,resave:!0})),require("./config/passport")(passport),app.use(passport.initialize()),app.use(passport.session()),app.use(flash());var routes=require("./routes/routes"),users=require("./routes/users")(app,passport),products=require("./routes/cart"),checkout=require("./routes/checkout"),press=require("./routes/press"),services=require("./routes/services"),contact=require("./routes/contact"),admin=require("./routes/admin"),profile=require("./routes/profile"),eyetest=require("./routes/eye-test");app.use("/",routes),app.use("/cart",products),app.use("/checkout",checkout),app.use("/press",press),app.use("/services",services),app.use("/contact-us",contact),app.use("/admin",admin),app.use("/usr",profile),app.use("/eye-test",eyetest),app.use(function(e,s,r){var p=e.session.error,a=e.session.notice,o=e.session.success;delete e.session.error,delete e.session.success,delete e.session.notice,p&&(s.locals.error=p),a&&(s.locals.notice=a),o&&(s.locals.success=o),r()}),app.use(function(e,s,r){var p=new Error("Not Found");p.status=404,r(p)}),"development"===app.get("env")&&app.use(function(e,s,r,p){r.status(e.status||500),r.render("error",{message:e.message,error:e})}),app.use(function(e,s,r,p){r.status(e.status||500),r.render("error",{message:e.message,error:{}})}),module.exports=app;
//# sourceMappingURL=app.min.js.map
